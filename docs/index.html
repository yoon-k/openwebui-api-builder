<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI API Builder - Live Demo</title>
    <meta name="description" content="AI-powered API builder for designing REST/GraphQL APIs, generating endpoint code, creating schemas, and documentation.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8b5cf6;
            --primary-dark: #7c3aed;
            --accent: #06b6d4;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-dark: #0f0f23;
            --bg-card: #1a1a2e;
            --bg-input: #252542;
            --text-primary: #e4e4f0;
            --text-secondary: #9898b0;
            --border: #3d3d5c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }

        /* Header */
        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        header > * { position: relative; z-index: 1; }

        .lang-selector {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .lang-btn {
            padding: 8px 16px;
            background: rgba(255,255,255,0.15);
            border: 2px solid transparent;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .lang-btn:hover { background: rgba(255,255,255,0.25); }
        .lang-btn.active { background: white; color: var(--primary); }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        header h1 .icon { font-size: 3rem; }
        header p { opacity: 0.9; font-size: 1.1rem; }

        /* Connection Bar */
        .connection-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            background: var(--bg-card);
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            border: 1px solid var(--border);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.connected { background: var(--success); }
        .status-dot.disconnected { background: var(--warning); }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .api-input-group {
            display: flex;
            gap: 10px;
            flex: 1;
            min-width: 300px;
        }

        .api-input {
            flex: 1;
            padding: 10px 15px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .api-input:focus { outline: none; border-color: var(--primary); }

        .connect-btn {
            padding: 10px 20px;
            background: var(--primary);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .connect-btn:hover { background: var(--primary-dark); }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-secondary);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .tab:hover { background: var(--bg-input); color: var(--text-primary); }
        .tab.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* Panel */
        .panel {
            background: var(--bg-card);
            border-radius: 20px;
            border: 1px solid var(--border);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .panel-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-header h2 {
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mode-badge {
            padding: 5px 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .panel-body { padding: 20px; }

        /* Form */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 15px;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: inherit;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
            font-family: 'JetBrains Mono', monospace;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .checkbox-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .checkbox-item input {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        .btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(139, 92, 246, 0.4); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        .btn-secondary {
            background: var(--bg-input);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover { background: var(--border); box-shadow: none; }

        /* Output */
        .output-container {
            margin-top: 20px;
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .output-header h3 {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .copy-btn {
            padding: 6px 12px;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.8rem;
        }

        .copy-btn:hover { background: var(--border); color: var(--text-primary); }

        .code-output {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .code-output::-webkit-scrollbar { width: 6px; height: 6px; }
        .code-output::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

        /* Features */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid var(--border);
        }

        .feature-card:hover { transform: translateY(-5px); border-color: var(--primary); }

        .feature-icon { font-size: 2.5rem; margin-bottom: 15px; }
        .feature-card h3 { margin-bottom: 10px; font-size: 1.1rem; }
        .feature-card p { color: var(--text-secondary); font-size: 0.9rem; }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        footer a { color: var(--primary); text-decoration: none; }
        footer a:hover { text-decoration: underline; }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; }

        @media (max-width: 768px) {
            header h1 { font-size: 1.8rem; }
            .api-input-group { min-width: 100%; }
            .connection-bar { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="lang-selector">
                <button class="lang-btn active" data-lang="en" onclick="setLanguage('en')">EN</button>
                <button class="lang-btn" data-lang="ko" onclick="setLanguage('ko')">KO</button>
                <button class="lang-btn" data-lang="ja" onclick="setLanguage('ja')">JA</button>
                <button class="lang-btn" data-lang="zh" onclick="setLanguage('zh')">ZH</button>
                <button class="lang-btn" data-lang="es" onclick="setLanguage('es')">ES</button>
                <button class="lang-btn" data-lang="fr" onclick="setLanguage('fr')">FR</button>
                <button class="lang-btn" data-lang="de" onclick="setLanguage('de')">DE</button>
            </div>
            <h1><span class="icon">ğŸ”§</span><span id="title">AI API Builder</span></h1>
            <p id="subtitle">Design, generate, and document APIs with AI assistance</p>
        </header>

        <div class="connection-bar">
            <div class="status-indicator">
                <span class="status-dot disconnected" id="statusDot"></span>
                <span id="statusText">Simulation Mode</span>
            </div>
            <div class="api-input-group">
                <input type="text" class="api-input" id="apiUrl" placeholder="http://localhost:5000">
                <button class="connect-btn" id="connectBtn" onclick="connectToAPI()">Connect</button>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="design" onclick="showTab('design')" id="tabDesign">API Design</button>
            <button class="tab" data-tab="endpoint" onclick="showTab('endpoint')" id="tabEndpoint">Endpoint</button>
            <button class="tab" data-tab="schema" onclick="showTab('schema')" id="tabSchema">Schema</button>
            <button class="tab" data-tab="chat" onclick="showTab('chat')" id="tabChat">Chat</button>
        </div>

        <!-- API Design Tab -->
        <div id="designContent" class="tab-content active">
            <div class="panel">
                <div class="panel-header">
                    <h2><span>ğŸ“</span> <span id="designTitle">API Design</span></h2>
                    <span class="mode-badge" id="designModeBadge">Simulation</span>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label id="descLabel">Description</label>
                        <textarea class="form-textarea" id="designDesc" placeholder="Describe your API..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label id="styleLabel">API Style</label>
                            <select class="form-select" id="apiStyle">
                                <option value="rest">REST</option>
                                <option value="graphql">GraphQL</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label id="frameworkLabel">Framework</label>
                            <select class="form-select" id="framework">
                                <option value="fastapi">FastAPI</option>
                                <option value="flask">Flask</option>
                                <option value="express">Express.js</option>
                                <option value="django">Django</option>
                                <option value="spring">Spring Boot</option>
                                <option value="nestjs">NestJS</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label id="entitiesLabel">Entities (comma-separated)</label>
                        <input type="text" class="form-input" id="entities" placeholder="User, Product, Order">
                    </div>
                    <button class="btn" onclick="generateDesign()" id="generateDesignBtn">
                        <span>ğŸš€</span> <span id="generateDesignText">Generate Design</span>
                    </button>
                    <div class="output-container" id="designOutput" style="display: none;">
                        <div class="output-header">
                            <h3 id="outputLabel">Output</h3>
                            <button class="copy-btn" onclick="copyOutput('designResult')">Copy</button>
                        </div>
                        <div class="code-output" id="designResult"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Endpoint Tab -->
        <div id="endpointContent" class="tab-content">
            <div class="panel">
                <div class="panel-header">
                    <h2><span>ğŸ”Œ</span> <span id="endpointTitle">Endpoint Generator</span></h2>
                    <span class="mode-badge" id="endpointModeBadge">Simulation</span>
                </div>
                <div class="panel-body">
                    <div class="form-row">
                        <div class="form-group">
                            <label id="resourceLabel">Resource</label>
                            <input type="text" class="form-input" id="resource" placeholder="users">
                        </div>
                        <div class="form-group">
                            <label id="methodLabel">Method</label>
                            <select class="form-select" id="method">
                                <option value="GET">GET</option>
                                <option value="POST">POST</option>
                                <option value="PUT">PUT</option>
                                <option value="DELETE">DELETE</option>
                                <option value="PATCH">PATCH</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label id="endpointDescLabel">Description</label>
                        <input type="text" class="form-input" id="endpointDesc" placeholder="Get all users with pagination">
                    </div>
                    <div class="form-group">
                        <label id="optionsLabel">Options</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" id="includeAuth" checked>
                                <span id="authLabel">Authentication</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="includeValidation" checked>
                                <span id="validationLabel">Validation</span>
                            </label>
                        </div>
                    </div>
                    <button class="btn" onclick="generateEndpoint()" id="generateEndpointBtn">
                        <span>âš¡</span> <span id="generateEndpointText">Generate Endpoint</span>
                    </button>
                    <div class="output-container" id="endpointOutput" style="display: none;">
                        <div class="output-header">
                            <h3>Output</h3>
                            <button class="copy-btn" onclick="copyOutput('endpointResult')">Copy</button>
                        </div>
                        <div class="code-output" id="endpointResult"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schema Tab -->
        <div id="schemaContent" class="tab-content">
            <div class="panel">
                <div class="panel-header">
                    <h2><span>ğŸ“‹</span> <span id="schemaTitle">Schema Generator</span></h2>
                    <span class="mode-badge" id="schemaModeBadge">Simulation</span>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label id="schemaDescLabel">Description</label>
                        <textarea class="form-textarea" id="schemaDesc" placeholder="Describe your data model..."></textarea>
                    </div>
                    <div class="form-group">
                        <label id="formatLabel">Format</label>
                        <select class="form-select" id="schemaFormat">
                            <option value="openapi">OpenAPI</option>
                            <option value="jsonschema">JSON Schema</option>
                            <option value="graphql">GraphQL</option>
                            <option value="protobuf">Protobuf</option>
                        </select>
                    </div>
                    <button class="btn" onclick="generateSchema()" id="generateSchemaBtn">
                        <span>ğŸ“</span> <span id="generateSchemaText">Generate Schema</span>
                    </button>
                    <div class="output-container" id="schemaOutput" style="display: none;">
                        <div class="output-header">
                            <h3>Output</h3>
                            <button class="copy-btn" onclick="copyOutput('schemaResult')">Copy</button>
                        </div>
                        <div class="code-output" id="schemaResult"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Tab -->
        <div id="chatContent" class="tab-content">
            <div class="panel">
                <div class="panel-header">
                    <h2><span>ğŸ’¬</span> <span id="chatTitle">API Assistant Chat</span></h2>
                    <span class="mode-badge" id="chatModeBadge">Simulation</span>
                </div>
                <div class="panel-body">
                    <div class="code-output" id="chatMessages" style="min-height: 300px; margin-bottom: 15px;"></div>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" class="form-input" id="chatInput" placeholder="Ask about API design..." onkeypress="handleChatKeyPress(event)">
                        <button class="btn" onclick="sendChat()" id="sendChatBtn">Send</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">ğŸ“</div>
                <h3 id="feature1Title">API Design</h3>
                <p id="feature1Desc">Generate complete API architectures from descriptions.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ”Œ</div>
                <h3 id="feature2Title">Endpoint Code</h3>
                <p id="feature2Desc">Create production-ready endpoint code instantly.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ“‹</div>
                <h3 id="feature3Title">Schema Generation</h3>
                <p id="feature3Desc">Generate OpenAPI, GraphQL, JSON Schema specs.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ“š</div>
                <h3 id="feature4Title">Documentation</h3>
                <p id="feature4Desc">Auto-generate comprehensive API documentation.</p>
            </div>
        </div>

        <footer>
            <p id="footerText">Built with OpenWebUI + LLM | <a href="https://github.com/yoon-k/openwebui-api-builder">View on GitHub</a></p>
            <p id="footerDemo" style="margin-top: 10px; opacity: 0.7;">Connect your backend server to enable live AI generation</p>
        </footer>
    </div>

    <script>
        // State
        let currentLang = localStorage.getItem('apibuilder-lang') || 'en';
        let isConnected = false;
        let apiBaseUrl = localStorage.getItem('apibuilder-api') || '';
        let chatHistory = [];

        // i18n
        const i18n = {
            en: {
                title: "AI API Builder",
                subtitle: "Design, generate, and document APIs with AI assistance",
                tabDesign: "API Design",
                tabEndpoint: "Endpoint",
                tabSchema: "Schema",
                tabChat: "Chat",
                designTitle: "API Design",
                endpointTitle: "Endpoint Generator",
                schemaTitle: "Schema Generator",
                chatTitle: "API Assistant Chat",
                descLabel: "Description",
                styleLabel: "API Style",
                frameworkLabel: "Framework",
                entitiesLabel: "Entities (comma-separated)",
                resourceLabel: "Resource",
                methodLabel: "Method",
                optionsLabel: "Options",
                authLabel: "Authentication",
                validationLabel: "Validation",
                formatLabel: "Format",
                generateDesign: "Generate Design",
                generateEndpoint: "Generate Endpoint",
                generateSchema: "Generate Schema",
                send: "Send",
                connect: "Connect",
                disconnect: "Disconnect",
                connecting: "Connecting...",
                connected: "Connected to API",
                disconnected: "Simulation Mode",
                simulation: "Simulation",
                live: "Live API",
                feature1Title: "API Design",
                feature1Desc: "Generate complete API architectures from descriptions.",
                feature2Title: "Endpoint Code",
                feature2Desc: "Create production-ready endpoint code instantly.",
                feature3Title: "Schema Generation",
                feature3Desc: "Generate OpenAPI, GraphQL, JSON Schema specs.",
                feature4Title: "Documentation",
                feature4Desc: "Auto-generate comprehensive API documentation.",
                footerText: "Built with OpenWebUI + LLM | <a href='https://github.com/yoon-k/openwebui-api-builder'>View on GitHub</a>",
                footerDemo: "Connect your backend server to enable live AI generation",
                chatPlaceholder: "Ask about API design..."
            },
            ko: {
                title: "AI API ë¹Œë”",
                subtitle: "AI ì§€ì›ìœ¼ë¡œ APIë¥¼ ì„¤ê³„, ìƒì„± ë° ë¬¸ì„œí™”í•˜ì„¸ìš”",
                tabDesign: "API ì„¤ê³„",
                tabEndpoint: "ì—”ë“œí¬ì¸íŠ¸",
                tabSchema: "ìŠ¤í‚¤ë§ˆ",
                tabChat: "ì±„íŒ…",
                designTitle: "API ì„¤ê³„",
                endpointTitle: "ì—”ë“œí¬ì¸íŠ¸ ìƒì„±ê¸°",
                schemaTitle: "ìŠ¤í‚¤ë§ˆ ìƒì„±ê¸°",
                chatTitle: "API ì–´ì‹œìŠ¤í„´íŠ¸ ì±„íŒ…",
                descLabel: "ì„¤ëª…",
                styleLabel: "API ìŠ¤íƒ€ì¼",
                frameworkLabel: "í”„ë ˆì„ì›Œí¬",
                entitiesLabel: "ì—”í‹°í‹° (ì‰¼í‘œë¡œ êµ¬ë¶„)",
                resourceLabel: "ë¦¬ì†ŒìŠ¤",
                methodLabel: "ë©”ì„œë“œ",
                optionsLabel: "ì˜µì…˜",
                authLabel: "ì¸ì¦",
                validationLabel: "ê²€ì¦",
                formatLabel: "í˜•ì‹",
                generateDesign: "ì„¤ê³„ ìƒì„±",
                generateEndpoint: "ì—”ë“œí¬ì¸íŠ¸ ìƒì„±",
                generateSchema: "ìŠ¤í‚¤ë§ˆ ìƒì„±",
                send: "ì „ì†¡",
                connect: "ì—°ê²°",
                disconnect: "ì—°ê²° í•´ì œ",
                connecting: "ì—°ê²° ì¤‘...",
                connected: "API ì—°ê²°ë¨",
                disconnected: "ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ",
                simulation: "ì‹œë®¬ë ˆì´ì…˜",
                live: "ë¼ì´ë¸Œ API",
                feature1Title: "API ì„¤ê³„",
                feature1Desc: "ì„¤ëª…ì—ì„œ ì™„ì „í•œ API ì•„í‚¤í…ì²˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.",
                feature2Title: "ì—”ë“œí¬ì¸íŠ¸ ì½”ë“œ",
                feature2Desc: "ì¦‰ì‹œ í”„ë¡œë•ì…˜ìš© ì—”ë“œí¬ì¸íŠ¸ ì½”ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.",
                feature3Title: "ìŠ¤í‚¤ë§ˆ ìƒì„±",
                feature3Desc: "OpenAPI, GraphQL, JSON Schema ìŠ¤í™ì„ ìƒì„±í•©ë‹ˆë‹¤.",
                feature4Title: "ë¬¸ì„œí™”",
                feature4Desc: "í¬ê´„ì ì¸ API ë¬¸ì„œë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤.",
                footerText: "OpenWebUI + LLMìœ¼ë¡œ ì œì‘ | <a href='https://github.com/yoon-k/openwebui-api-builder'>GitHubì—ì„œ ë³´ê¸°</a>",
                footerDemo: "ë°±ì—”ë“œ ì„œë²„ë¥¼ ì—°ê²°í•˜ì—¬ ì‹¤ì‹œê°„ AI ìƒì„±ì„ í™œì„±í™”í•˜ì„¸ìš”",
                chatPlaceholder: "API ì„¤ê³„ì— ëŒ€í•´ ì§ˆë¬¸í•˜ì„¸ìš”..."
            },
            ja: {
                title: "AI APIãƒ“ãƒ«ãƒ€ãƒ¼",
                subtitle: "AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ã‚¹ã§APIã‚’è¨­è¨ˆã€ç”Ÿæˆã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–",
                tabDesign: "APIè¨­è¨ˆ",
                tabEndpoint: "ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ",
                tabSchema: "ã‚¹ã‚­ãƒ¼ãƒ",
                tabChat: "ãƒãƒ£ãƒƒãƒˆ",
                designTitle: "APIè¨­è¨ˆ",
                endpointTitle: "ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç”Ÿæˆ",
                schemaTitle: "ã‚¹ã‚­ãƒ¼ãƒç”Ÿæˆ",
                chatTitle: "APIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãƒãƒ£ãƒƒãƒˆ",
                descLabel: "èª¬æ˜",
                styleLabel: "APIã‚¹ã‚¿ã‚¤ãƒ«",
                frameworkLabel: "ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯",
                entitiesLabel: "ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰",
                resourceLabel: "ãƒªã‚½ãƒ¼ã‚¹",
                methodLabel: "ãƒ¡ã‚½ãƒƒãƒ‰",
                optionsLabel: "ã‚ªãƒ—ã‚·ãƒ§ãƒ³",
                authLabel: "èªè¨¼",
                validationLabel: "æ¤œè¨¼",
                formatLabel: "ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ",
                generateDesign: "è¨­è¨ˆã‚’ç”Ÿæˆ",
                generateEndpoint: "ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç”Ÿæˆ",
                generateSchema: "ã‚¹ã‚­ãƒ¼ãƒã‚’ç”Ÿæˆ",
                send: "é€ä¿¡",
                connect: "æ¥ç¶š",
                disconnect: "åˆ‡æ–­",
                connecting: "æ¥ç¶šä¸­...",
                connected: "APIæ¥ç¶šæ¸ˆã¿",
                disconnected: "ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ¼ãƒ‰",
                simulation: "ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
                live: "ãƒ©ã‚¤ãƒ–API",
                feature1Title: "APIè¨­è¨ˆ",
                feature1Desc: "èª¬æ˜ã‹ã‚‰å®Œå…¨ãªAPIã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ç”Ÿæˆã€‚",
                feature2Title: "ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰",
                feature2Desc: "æœ¬ç•ªç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å³åº§ã«ä½œæˆã€‚",
                feature3Title: "ã‚¹ã‚­ãƒ¼ãƒç”Ÿæˆ",
                feature3Desc: "OpenAPIã€GraphQLã€JSON Schemaã‚¹ãƒšãƒƒã‚¯ã‚’ç”Ÿæˆã€‚",
                feature4Title: "ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ",
                feature4Desc: "åŒ…æ‹¬çš„ãªAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã€‚",
                footerText: "OpenWebUI + LLMã§æ§‹ç¯‰ | <a href='https://github.com/yoon-k/openwebui-api-builder'>GitHubã§è¦‹ã‚‹</a>",
                footerDemo: "ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã‚’æ¥ç¶šã—ã¦ãƒ©ã‚¤ãƒ–AIç”Ÿæˆã‚’æœ‰åŠ¹ã«ã—ã¦ãã ã•ã„",
                chatPlaceholder: "APIè¨­è¨ˆã«ã¤ã„ã¦è³ªå•..."
            },
            zh: {
                title: "AI APIæ„å»ºå™¨",
                subtitle: "ä½¿ç”¨AIè¾…åŠ©è®¾è®¡ã€ç”Ÿæˆå’Œè®°å½•API",
                tabDesign: "APIè®¾è®¡",
                tabEndpoint: "ç«¯ç‚¹",
                tabSchema: "æ¨¡å¼",
                tabChat: "èŠå¤©",
                designTitle: "APIè®¾è®¡",
                endpointTitle: "ç«¯ç‚¹ç”Ÿæˆå™¨",
                schemaTitle: "æ¨¡å¼ç”Ÿæˆå™¨",
                chatTitle: "APIåŠ©æ‰‹èŠå¤©",
                descLabel: "æè¿°",
                styleLabel: "APIé£æ ¼",
                frameworkLabel: "æ¡†æ¶",
                entitiesLabel: "å®ä½“ï¼ˆé€—å·åˆ†éš”ï¼‰",
                resourceLabel: "èµ„æº",
                methodLabel: "æ–¹æ³•",
                optionsLabel: "é€‰é¡¹",
                authLabel: "è®¤è¯",
                validationLabel: "éªŒè¯",
                formatLabel: "æ ¼å¼",
                generateDesign: "ç”Ÿæˆè®¾è®¡",
                generateEndpoint: "ç”Ÿæˆç«¯ç‚¹",
                generateSchema: "ç”Ÿæˆæ¨¡å¼",
                send: "å‘é€",
                connect: "è¿æ¥",
                disconnect: "æ–­å¼€",
                connecting: "è¿æ¥ä¸­...",
                connected: "å·²è¿æ¥API",
                disconnected: "æ¨¡æ‹Ÿæ¨¡å¼",
                simulation: "æ¨¡æ‹Ÿ",
                live: "å®æ—¶API",
                feature1Title: "APIè®¾è®¡",
                feature1Desc: "ä»æè¿°ç”Ÿæˆå®Œæ•´çš„APIæ¶æ„ã€‚",
                feature2Title: "ç«¯ç‚¹ä»£ç ",
                feature2Desc: "å³æ—¶åˆ›å»ºç”Ÿäº§å°±ç»ªçš„ç«¯ç‚¹ä»£ç ã€‚",
                feature3Title: "æ¨¡å¼ç”Ÿæˆ",
                feature3Desc: "ç”ŸæˆOpenAPIã€GraphQLã€JSON Schemaè§„èŒƒã€‚",
                feature4Title: "æ–‡æ¡£",
                feature4Desc: "è‡ªåŠ¨ç”Ÿæˆå…¨é¢çš„APIæ–‡æ¡£ã€‚",
                footerText: "ä½¿ç”¨OpenWebUI + LLMæ„å»º | <a href='https://github.com/yoon-k/openwebui-api-builder'>åœ¨GitHubä¸ŠæŸ¥çœ‹</a>",
                footerDemo: "è¿æ¥æ‚¨çš„åç«¯æœåŠ¡å™¨ä»¥å¯ç”¨å®æ—¶AIç”Ÿæˆ",
                chatPlaceholder: "è¯¢é—®APIè®¾è®¡..."
            },
            es: {
                title: "AI API Builder",
                subtitle: "DiseÃ±a, genera y documenta APIs con asistencia de IA",
                connect: "Conectar",
                disconnect: "Desconectar",
                connected: "API Conectada",
                disconnected: "Modo SimulaciÃ³n",
                simulation: "SimulaciÃ³n",
                live: "API en Vivo",
                generateDesign: "Generar DiseÃ±o",
                generateEndpoint: "Generar Endpoint",
                generateSchema: "Generar Schema",
                send: "Enviar",
                footerText: "Construido con OpenWebUI + LLM | <a href='https://github.com/yoon-k/openwebui-api-builder'>Ver en GitHub</a>",
                footerDemo: "Conecta tu servidor backend para habilitar generaciÃ³n IA en vivo"
            },
            fr: {
                title: "AI API Builder",
                subtitle: "Concevez, gÃ©nÃ©rez et documentez des APIs avec l'assistance IA",
                connect: "Connecter",
                disconnect: "DÃ©connecter",
                connected: "API ConnectÃ©e",
                disconnected: "Mode Simulation",
                simulation: "Simulation",
                live: "API en Direct",
                generateDesign: "GÃ©nÃ©rer Design",
                generateEndpoint: "GÃ©nÃ©rer Endpoint",
                generateSchema: "GÃ©nÃ©rer Schema",
                send: "Envoyer",
                footerText: "Construit avec OpenWebUI + LLM | <a href='https://github.com/yoon-k/openwebui-api-builder'>Voir sur GitHub</a>",
                footerDemo: "Connectez votre serveur backend pour activer la gÃ©nÃ©ration IA en direct"
            },
            de: {
                title: "AI API Builder",
                subtitle: "Entwerfen, generieren und dokumentieren Sie APIs mit KI-UnterstÃ¼tzung",
                connect: "Verbinden",
                disconnect: "Trennen",
                connected: "API verbunden",
                disconnected: "Simulationsmodus",
                simulation: "Simulation",
                live: "Live API",
                generateDesign: "Design Generieren",
                generateEndpoint: "Endpoint Generieren",
                generateSchema: "Schema Generieren",
                send: "Senden",
                footerText: "Erstellt mit OpenWebUI + LLM | <a href='https://github.com/yoon-k/openwebui-api-builder'>Auf GitHub ansehen</a>",
                footerDemo: "Verbinden Sie Ihren Backend-Server fÃ¼r Live-KI-Generierung"
            }
        };

        // Simulated responses
        const simulatedResponses = {
            design: `// Generated API Design (Simulation)

# User Management API

## Endpoints

### Users
- GET    /api/users          - List all users
- GET    /api/users/:id      - Get user by ID
- POST   /api/users          - Create new user
- PUT    /api/users/:id      - Update user
- DELETE /api/users/:id      - Delete user

### Products
- GET    /api/products       - List products
- GET    /api/products/:id   - Get product
- POST   /api/products       - Create product

### Orders
- GET    /api/orders         - List orders
- POST   /api/orders         - Create order

## Authentication
- JWT Bearer Token
- OAuth 2.0 support

## Data Models
- User: id, email, name, role, createdAt
- Product: id, name, price, stock
- Order: id, userId, items, total, status`,

            endpoint: `# Generated Endpoint (Simulation)

from fastapi import APIRouter, Depends, HTTPException, Query
from typing import List, Optional
from pydantic import BaseModel

router = APIRouter(prefix="/users", tags=["users"])

class User(BaseModel):
    id: int
    email: str
    name: str

class UserCreate(BaseModel):
    email: str
    name: str

@router.get("/", response_model=List[User])
async def get_users(
    skip: int = Query(0, ge=0),
    limit: int = Query(10, ge=1, le=100),
    current_user = Depends(get_current_user)
):
    """Get all users with pagination"""
    return await user_service.get_users(skip, limit)

@router.post("/", response_model=User, status_code=201)
async def create_user(
    user: UserCreate,
    current_user = Depends(get_current_user)
):
    """Create a new user"""
    return await user_service.create_user(user)`,

            schema: `# Generated Schema (Simulation)

openapi: 3.0.0
info:
  title: API Schema
  version: 1.0.0

components:
  schemas:
    User:
      type: object
      required:
        - email
        - name
      properties:
        id:
          type: integer
          readOnly: true
        email:
          type: string
          format: email
        name:
          type: string
          minLength: 1
          maxLength: 100
        role:
          type: string
          enum: [user, admin]
          default: user
        createdAt:
          type: string
          format: date-time
          readOnly: true

    Product:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        price:
          type: number
          format: float
        stock:
          type: integer`,

            chat: "I'm the API Builder Assistant! I can help you design REST/GraphQL APIs, generate endpoint code, create schemas, and write documentation. What would you like to build today?"
        };

        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('apibuilder-lang', lang);
            const t = i18n[lang] || i18n.en;

            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });

            document.getElementById('title').textContent = t.title || i18n.en.title;
            document.getElementById('subtitle').textContent = t.subtitle || i18n.en.subtitle;

            if (t.tabDesign) document.getElementById('tabDesign').textContent = t.tabDesign;
            if (t.tabEndpoint) document.getElementById('tabEndpoint').textContent = t.tabEndpoint;
            if (t.tabSchema) document.getElementById('tabSchema').textContent = t.tabSchema;
            if (t.tabChat) document.getElementById('tabChat').textContent = t.tabChat;

            document.getElementById('generateDesignText').textContent = t.generateDesign || i18n.en.generateDesign;
            document.getElementById('generateEndpointText').textContent = t.generateEndpoint || i18n.en.generateEndpoint;
            document.getElementById('generateSchemaText').textContent = t.generateSchema || i18n.en.generateSchema;
            document.getElementById('sendChatBtn').textContent = t.send || i18n.en.send;

            document.getElementById('connectBtn').textContent = isConnected ? (t.disconnect || 'Disconnect') : (t.connect || 'Connect');
            document.getElementById('statusText').textContent = isConnected ? (t.connected || 'Connected') : (t.disconnected || 'Simulation Mode');

            document.querySelectorAll('.mode-badge').forEach(badge => {
                badge.textContent = isConnected ? (t.live || 'Live API') : (t.simulation || 'Simulation');
            });

            document.getElementById('feature1Title').textContent = t.feature1Title || i18n.en.feature1Title;
            document.getElementById('feature1Desc').textContent = t.feature1Desc || i18n.en.feature1Desc;
            document.getElementById('feature2Title').textContent = t.feature2Title || i18n.en.feature2Title;
            document.getElementById('feature2Desc').textContent = t.feature2Desc || i18n.en.feature2Desc;
            document.getElementById('feature3Title').textContent = t.feature3Title || i18n.en.feature3Title;
            document.getElementById('feature3Desc').textContent = t.feature3Desc || i18n.en.feature3Desc;
            document.getElementById('feature4Title').textContent = t.feature4Title || i18n.en.feature4Title;
            document.getElementById('feature4Desc').textContent = t.feature4Desc || i18n.en.feature4Desc;

            document.getElementById('footerText').innerHTML = t.footerText || i18n.en.footerText;
            document.getElementById('footerDemo').textContent = t.footerDemo || i18n.en.footerDemo;

            document.getElementById('chatInput').placeholder = t.chatPlaceholder || i18n.en.chatPlaceholder || "Ask about API design...";
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`${tabName}Content`).classList.add('active');
        }

        async function connectToAPI() {
            const url = document.getElementById('apiUrl').value.trim();
            const t = i18n[currentLang] || i18n.en;

            if (isConnected) {
                isConnected = false;
                apiBaseUrl = '';
                localStorage.removeItem('apibuilder-api');
                updateConnectionStatus();
                return;
            }

            if (!url) { alert('Please enter API URL'); return; }

            document.getElementById('connectBtn').disabled = true;
            document.getElementById('connectBtn').textContent = t.connecting || 'Connecting...';

            try {
                const response = await fetch(`${url}/api/health`);
                if (response.ok) {
                    isConnected = true;
                    apiBaseUrl = url;
                    localStorage.setItem('apibuilder-api', url);
                } else {
                    throw new Error('Health check failed');
                }
            } catch (error) {
                alert(`Connection failed: ${error.message}`);
                isConnected = false;
            }

            document.getElementById('connectBtn').disabled = false;
            updateConnectionStatus();
        }

        function updateConnectionStatus() {
            const t = i18n[currentLang] || i18n.en;
            document.getElementById('statusDot').className = 'status-dot ' + (isConnected ? 'connected' : 'disconnected');
            document.getElementById('statusText').textContent = isConnected ? (t.connected || 'Connected') : (t.disconnected || 'Simulation Mode');
            document.getElementById('connectBtn').textContent = isConnected ? (t.disconnect || 'Disconnect') : (t.connect || 'Connect');

            document.querySelectorAll('.mode-badge').forEach(badge => {
                badge.textContent = isConnected ? (t.live || 'Live API') : (t.simulation || 'Simulation');
            });
        }

        async function generateDesign() {
            const btn = document.getElementById('generateDesignBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Generating...';

            const description = document.getElementById('designDesc').value;
            const style = document.getElementById('apiStyle').value;
            const framework = document.getElementById('framework').value;
            const entities = document.getElementById('entities').value.split(',').map(e => e.trim()).filter(e => e);

            let result;
            if (isConnected && apiBaseUrl) {
                try {
                    const response = await fetch(`${apiBaseUrl}/api/design`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            description, api_style: style, framework,
                            entities, features: [], language: currentLang
                        })
                    });
                    const data = await response.json();
                    result = data.design || data.error || JSON.stringify(data, null, 2);
                } catch (error) {
                    result = simulatedResponses.design + '\n\n// API Error: ' + error.message;
                }
            } else {
                await new Promise(r => setTimeout(r, 1000));
                result = simulatedResponses.design;
            }

            document.getElementById('designResult').textContent = result;
            document.getElementById('designOutput').style.display = 'block';
            btn.disabled = false;
            btn.innerHTML = '<span>ğŸš€</span> ' + (i18n[currentLang]?.generateDesign || 'Generate Design');
        }

        async function generateEndpoint() {
            const btn = document.getElementById('generateEndpointBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Generating...';

            const resource = document.getElementById('resource').value;
            const method = document.getElementById('method').value;
            const description = document.getElementById('endpointDesc').value;
            const includeAuth = document.getElementById('includeAuth').checked;
            const includeValidation = document.getElementById('includeValidation').checked;

            let result;
            if (isConnected && apiBaseUrl) {
                try {
                    const response = await fetch(`${apiBaseUrl}/api/endpoint`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            resource, method, framework: document.getElementById('framework').value,
                            description, include_auth: includeAuth, include_validation: includeValidation,
                            language: currentLang
                        })
                    });
                    const data = await response.json();
                    result = data.code || data.error || JSON.stringify(data, null, 2);
                } catch (error) {
                    result = simulatedResponses.endpoint + '\n\n# API Error: ' + error.message;
                }
            } else {
                await new Promise(r => setTimeout(r, 1000));
                result = simulatedResponses.endpoint;
            }

            document.getElementById('endpointResult').textContent = result;
            document.getElementById('endpointOutput').style.display = 'block';
            btn.disabled = false;
            btn.innerHTML = '<span>âš¡</span> ' + (i18n[currentLang]?.generateEndpoint || 'Generate Endpoint');
        }

        async function generateSchema() {
            const btn = document.getElementById('generateSchemaBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Generating...';

            const description = document.getElementById('schemaDesc').value;
            const format = document.getElementById('schemaFormat').value;

            let result;
            if (isConnected && apiBaseUrl) {
                try {
                    const response = await fetch(`${apiBaseUrl}/api/schema`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            description, format, entities: [], language: currentLang
                        })
                    });
                    const data = await response.json();
                    result = data.schema || data.error || JSON.stringify(data, null, 2);
                } catch (error) {
                    result = simulatedResponses.schema + '\n\n# API Error: ' + error.message;
                }
            } else {
                await new Promise(r => setTimeout(r, 1000));
                result = simulatedResponses.schema;
            }

            document.getElementById('schemaResult').textContent = result;
            document.getElementById('schemaOutput').style.display = 'block';
            btn.disabled = false;
            btn.innerHTML = '<span>ğŸ“</span> ' + (i18n[currentLang]?.generateSchema || 'Generate Schema');
        }

        async function sendChat() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML += `<div style="margin-bottom: 10px;"><strong>You:</strong> ${message}</div>`;
            input.value = '';

            let response;
            if (isConnected && apiBaseUrl) {
                try {
                    const res = await fetch(`${apiBaseUrl}/api/chat`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            message, context: 'api_design', history: chatHistory, language: currentLang
                        })
                    });
                    const data = await res.json();
                    response = data.response || data.error || 'No response';
                } catch (error) {
                    response = simulatedResponses.chat + ' (API Error: ' + error.message + ')';
                }
            } else {
                await new Promise(r => setTimeout(r, 500));
                response = simulatedResponses.chat;
            }

            chatMessages.innerHTML += `<div style="margin-bottom: 10px; color: var(--primary);"><strong>Assistant:</strong> ${response}</div>`;
            chatMessages.scrollTop = chatMessages.scrollHeight;
            chatHistory.push({ role: 'user', content: message }, { role: 'assistant', content: response });
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') sendChat();
        }

        function copyOutput(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text);
            alert('Copied to clipboard!');
        }

        // Initialize
        if (apiBaseUrl) {
            document.getElementById('apiUrl').value = apiBaseUrl;
            connectToAPI();
        }
        setLanguage(currentLang);
        document.getElementById('chatMessages').innerHTML = `<div style="color: var(--primary);"><strong>Assistant:</strong> ${simulatedResponses.chat}</div>`;
    </script>
</body>
</html>
